# SCC19 Workflow

This workflow automates the computation of *Normal Mode* using [pEVSL 
(parallel EigenValue Slicing Library)][pevsl] for the planetary models 
generated by [Planetary Model Builder][planetary-model].

## Workflow

The [workflow](./main.workflow) consists of three actions:

  * **`build`**. Builds `pEVSL` and test-cases for the same by reading 
    the configuration from the path supplied in `PEVSL_MAKEFILE_IN` 
    environment variable, and also installs 
    [NormalModes][normal-modes] application by reading the 
    configuration from the path supplied in `NORMALMODES_MAKEFILE_IN` 
    environment variable.

  * **`test`**.  Runs tests on `pEVSL`.

  * **`run`**. Compute the Normal Modes for a constant perfectly 
    spherically symmetric pure solid ball has a size of the Earth; 
    using the Model from [demos](./../submodules/NormalModes/demos). 
    The `global_conf` file in that file can be modified in order to 
    run other examples.

## Execution

This workflow runs on the host machine environment and can be executed 
with the [Popper CLI tool][popper]. For a version of this workflow in 
a containerized environment, see [here](../containerized). The 
following executes this workflow:

```bash
git clone --recursive https://github.com/ivotron/scc19-workflows
cd scc19-workflows/workflows/containerized

popper run
```

> **NOTE**: The `--recursive` flag is required in order to download 
> the <https://github.com/js1019/pEVSL> and 
> <https://github.com/js1019/NormalModes> projects, which are 
> submodules of this repository.

Sample output
(trimmed to only show end of execution):

```
 Row    261   1.9575838917916459        510.83379067078789
 Row    262   1.9654674111834070        508.78482864180404
 Row    263   1.9685489784113608        507.98837670120372
 Row    264   1.9764339222924401        505.96176716098506
 Row    265   1.9781774331264217        505.51582646433508
 Row    266   1.9809330184699281        504.81262651293457
 Row    267   1.9843952373083178        503.93186861122706
 Row    268   1.9860365613548143        503.51540321988341
 Row    269   1.9944091633034535        501.40162730883316
 Row    270   1.9972354448512162        500.69209545522301
 Row    271   1.9998649254669882        500.03377091404815
 ================================================================
 save eigenvectors
 Time elapsed =    41.091000000014901      seconds.
 save the results
 Time elapsed =    41.091999999945983      seconds.
 Time elapsed =    41.091999999945983      seconds.
```

[pevsl]: https://github.com/js1019/pEVSL
[planetary-model]: https://github.com/js1019/PlanetaryModels#planetary-model-builder
[normal-modes]: https://github.com/js1019/NormalModes
[docker]: https://get.docker.com
[popper]: https://github.com/systemslab/popper
[singularity]: https://github.com/sylabs/singularity
